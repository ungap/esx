const{assign:t,freeze:e,keys:s}=Object,n=e([]),i={},c=void 0;class r{static ATTRIBUTE=1;static COMPONENT=2;static ELEMENT=3;static FRAGMENT=4;static INTERPOLATION=5;static STATIC=6;constructor(t,e,s,n,i,c){this.type=t,this.attributes=e,this.children=s,this.name=i,this.value=c,this.dynamic=n}get properties(){const{attributes:e}=this;if(e!==n){const s={};for(const n of e)1===n.type?s[n.name]=n.value:t(s,n.value);return s}return null}}const o=t=>t.replace(/^[\r\n]\s*|\s*[\r\n]\s*$/g,""),a=new WeakMap,l=(t=i)=>{const e=new Set(s(t));return(s,...i)=>(a.get(s)||((t,e,s,i)=>{const l=({index:t},e)=>{const s=o(g.slice(d,t));if(s){const{length:t}=s;let e=0,n=e;do{if(n=s.indexOf("\0",e),n<0)h(o(s.slice(e)));else{h(o(s.slice(e,n)));const i=new r(5,c,c,!0,"#interpolation",c);if(u(i),p.push(i),e=n+1,e===t)break}}while(~n)}d=t+e.length},h=t=>{t&&u(new r(6,c,c,!1,"#static",t))},u=t=>{i[0].children.push(t)},f=t=>{i.length?u(t):i=[t],i=[t,i]},p=[],g=t.join("\0"),w=/(<(\/)?(\S*?)>)|(<(\S+)([^>/]*?)(\/)?>)/g;let T,d=0;for(;T=w.exec(g);){const[t,o,a,h,u,g,w,d]=T;switch(t){case"<>":l(T,t),f(new r(4,n,[],!1,"#fragment",c));break;case"</>":l(T,t),i=i[1];break;default:if(l(T,t),a)i=i[1];else{let t=n;if(w&&w.trim()){t=[];const e=/((\S+)=((('|")([^\5]*)\5)|\x00)|\x00)/g;let s;for(;s=e.exec(w);){const[e,n,i,o,a,l,h]=s;if(l)t.push(new r(1,c,c,!1,i,h));else{const e=new r(i?1:5,c,c,!0,i||"#interpolation",c);t.push(e),p.push(e)}}}const o=d?n:[],a=g||h,l=s.has(a),u=l?2:3,T=l?e[a]:c;f(new r(u,t,o,!1,a,T)),d&&(i=i[1])}}}const x=i[0],E=t=>{for(let e=0;e<p.length;e++)p[e].value=t[e];return x};return a.set(t,E),E})(s,t,e,n))(i)};export{l as ESX,r as Token};
