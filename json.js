const{assign:e,freeze:t,keys:a}=Object,n=t([]),s={},c=void 0;class r{static ATTRIBUTE=1;static COMPONENT=2;static ELEMENT=3;static FRAGMENT=4;static INTERPOLATION=5;static STATIC=6;constructor(e,t,a,n,s,c){this.type=e,this.attributes=t,this.children=a,this.name=s,this.value=c,this.dynamic=n}get properties(){const{attributes:t}=this;if(t!==n){const a={};for(const n of t)1===n.type?a[n.name]=n.value:e(a,n.value);return a}return null}}const{parse:i,stringify:u}=JSON,l=(e,t,...a)=>p(i(e,...a),t),o=(e,...t)=>u(m(e),...t),p=(e,t=s)=>{const{type:a}=e;switch(a){case 1:{const{dynamic:t,name:a,value:n}=e;return new r(1,c,c,!!t,a,n)}case 2:case 3:{const{attributes:s,children:i,name:u}=e,l=s?s.map(h,t):n,o=i?i.map(h,t):n,p=3===a?c:t[u];return new r(a,l,o,!1,u,p)}case 4:return new r(a,c,e.children.map(h,t),!1,"#fragment",c);case 5:{const{value:n}=e;return new r(a,c,c,!0,"#interpolation",n.i||p(n,t))}case 6:return new r(a,c,c,!1,"#static",e.value)}},m=e=>{const{type:t}=e;switch(t){case 1:{const{dynamic:a,name:n,value:s}=e;return a?{type:t,dynamic:1,name:n,value:s}:{type:t,name:n,value:s}}case 2:case 3:{const{attributes:a,children:s,name:c}=e,r={type:t,name:c};return a!==n&&(r.attributes=a.map(m)),s!==n&&(r.children=s.map(m)),r}case 4:return{type:t,children:e.children.map(m)};case 5:{const{value:a}=e;return{type:t,value:a instanceof r?m(a):{i:a}}}case 6:return{type:t,value:e.value}}};function h(e){return p(e,this)}export{p as fromJSON,l as parse,o as stringify,m as toJSON};
