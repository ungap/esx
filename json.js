const{assign:t,freeze:e,keys:a}=Object,n=e([]),s={},c=(t,e,a,n)=>({type:t,value:n,name:e,dynamic:a});class r{static ATTRIBUTE=1;static COMPONENT=2;static ELEMENT=3;static FRAGMENT=4;static INTERPOLATION=5;static STATIC=6;constructor(t,e,a,n,s){this.type=t,this.attributes=e,this.children=a,this.name=n,this.value=s}get dynamic(){return!1}get properties(){const{attributes:e}=this;if(e!==n){const a={};for(const{type:n,value:s,name:c}of e)1===n?a[c]=s:t(a,s);return a}return null}}const{parse:i,stringify:u}=JSON,l=(t,e,...a)=>p(i(t,...a),e),o=(t,...e)=>u(m(t),...e),p=(t,e=s)=>{const{type:a}=t;switch(a){case 1:{const{dynamic:e,name:a,value:n}=t;return c(1,a,!!e,n)}case 2:case 3:{const{attributes:s,children:c,name:i}=t,u=s?s.map(y,e):n,l=c?c.map(y,e):n,o=3===a?i:e[i];return new r(a,u,l,i,o)}case 4:return new r(a,n,t.children.map(y,e),"#fragment");case 5:{const{value:n}=t,s=n.type?p(n,e):n.i;return c(a,"#interpolation",!0,s)}case 6:return c(a,"#static",!1,t.value)}},m=t=>{const{type:e}=t;switch(e){case 1:{const{dynamic:a,name:n,value:s}=t;return a?{type:e,dynamic:1,name:n,value:s}:{type:e,name:n,value:s}}case 2:case 3:{const{attributes:a,children:s,name:c}=t,r={type:e,name:c};return a!==n&&(r.attributes=a.map(m)),s!==n&&(r.children=s.map(m)),r}case 4:return{type:e,children:t.children.map(m)};case 5:{const{value:a}=t;return{type:e,value:a instanceof r?m(a):{i:a}}}case 6:return{type:e,value:t.value}}};function y(t){return p(t,this)}export{p as fromJSON,l as parse,o as stringify,m as toJSON};
