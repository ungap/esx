const{assign:t,freeze:e,keys:a}=Object,n=e([]),s={},c=void 0;class r{static ATTRIBUTE=1;static COMPONENT=2;static ELEMENT=3;static FRAGMENT=4;static INTERPOLATION=5;static STATIC=6;constructor(t,e,a,n,s,c){this.type=t,this.attributes=e,this.children=a,this.dynamic=n,this.name=s,this.value=c}get properties(){switch(this.type){case 3:case 2:const e={},{attributes:a}=this;if(a!==n){for(const n of a)1===n.type?e[n.name]=n.value:t(e,n.value);return e}}return null}}const{parse:i,stringify:u}=JSON,l=(t,e,...a)=>p(i(t,...a),e),o=(t,...e)=>u(h(t),...e),p=(t,e=s)=>{const{type:i}=t;switch(i){case 1:{const{dynamic:e,name:a,value:n}=t;return new r(1,c,c,e,a,n)}case 2:case 3:{const{attributes:a,children:s,name:u}=t,l=a?a.map(m,e):n,o=s?s.map(m,e):n,p=3===i?c:e[u];return new r(i,l,o,!1,u,p)}case 4:return new r(i,c,t.children.map(m,e),!1,"#fragment",c);case 5:{const{value:n}=t,s=1===a(n).length?n:p(n,e);return new r(i,c,c,!0,"#interpolation",s)}case 6:return new r(i,c,c,!1,"#static",t.value)}},h=t=>{const{type:e}=t;switch(e){case 1:{const{dynamic:a,name:n,value:s}=t;return{type:e,dynamic:a,name:n,value:s}}case 2:case 3:{const{attributes:a,children:s,name:c}=t,r={type:e,name:c};return a!==n&&(r.attributes=a.map(h)),s!==n&&(r.children=s.map(h)),r}case 4:return{type:e,children:t.children.map(h)};case 5:{const{value:a}=t;return{type:e,value:a instanceof r?h(a):{i:a}}}case 6:return{type:e,value:t.value}}};function m(t){return p(t,this)}export{p as fromJSON,l as parse,o as stringify,h as toJSON};
