const{assign:e,freeze:t,keys:a}=Object,n=t([]),s={},c=void 0;class r{static ATTRIBUTE=1;static COMPONENT=2;static ELEMENT=3;static FRAGMENT=4;static INTERPOLATION=5;static STATIC=6;constructor(e,t,a,n,s,c){this.type=e,this.attributes=t,this.children=a,this.dynamic=n,this.name=s,this.value=c}get properties(){switch(this.type){case 3:case 2:const{attributes:t}=this;if(t!==n){const a={};for(const n of t)1===n.type?a[n.name]=n.value:e(a,n.value);return a}}return null}}const{parse:i,stringify:u}=JSON,l=(e,t,...a)=>p(i(e,...a),t),o=(e,...t)=>u(h(e),...t),p=(e,t=s)=>{const{type:i}=e;switch(i){case 1:{const{dynamic:t,name:a,value:n}=e;return new r(1,c,c,!!t,a,n)}case 2:case 3:{const{attributes:a,children:s,name:u}=e,l=a?a.map(m,t):n,o=s?s.map(m,t):n,p=3===i?c:t[u];return new r(i,l,o,!1,u,p)}case 4:return new r(i,c,e.children.map(m,t),!1,"#fragment",c);case 5:{const{value:n}=e,s=1===a(n).length?n:p(n,t);return new r(i,c,c,!0,"#interpolation",s)}case 6:return new r(i,c,c,!1,"#static",e.value)}},h=e=>{const{type:t}=e;switch(t){case 1:{const{dynamic:a,name:n,value:s}=e;return a?{type:t,dynamic:1,name:n,value:s}:{type:t,name:n,value:s}}case 2:case 3:{const{attributes:a,children:s,name:c}=e,r={type:t,name:c};return a!==n&&(r.attributes=a.map(h)),s!==n&&(r.children=s.map(h)),r}case 4:return{type:t,children:e.children.map(h)};case 5:{const{value:a}=e;return{type:t,value:a instanceof r?h(a):{i:a}}}case 6:return{type:t,value:e.value}}};function m(e){return p(e,this)}export{p as fromJSON,l as parse,o as stringify,h as toJSON};
